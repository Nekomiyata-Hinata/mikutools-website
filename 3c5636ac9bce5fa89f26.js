(window.webpackJsonp=window.webpackJsonp||[]).push([[116],{1803:function(t,o,n){"use strict";var r=n(621);n.n(r).a},1804:function(t,o,n){(t.exports=n(5)(!1)).push([t.i,"",""])},1931:function(t,o,n){"use strict";n.r(o);n(31);var r=n(30),e=n.n(r),l={name:"ResetPassword",head:function(){return{titleTemplate:"重置密码 - %s"}},data:function(){return{password:"",confirm_password:"",loading:!1}},mounted:function(){var t=this.$route.query,o=t.id,n=t.mail,r=t.sign;o&&n&&r&&e.a.isMongoId(o)&&e.a.isEmail(n)&&e.a.isJWT(r)||(this.$noty.error("验证失败，无效的参数"),this.$router.replace("/"))},methods:{resetPassword:function(){var t=this,o=this.$route.query,n=o.id,r=o.mail,l=o.sign;return e.a.matches(this.password,/^[\w_-]{6,16}$/)?this.password!==this.confirm_password?this.$noty.error("修改失败，两次密码不一致"):(this.$store.commit("loadingComponent",!0),this.loading=!0,void this.$axios.post("/user/reset_password/reset",{sign:l,mail:r,id:n,new_password:this.password}).then((function(){t.loading=!1,t.$noty.success("修改成功"),t.$router.replace("/"),t.$store.commit("loadingComponent",!1)})).catch((function(o){t.loading=!1,t.$noty.error("修改失败：".concat(o)),t.$store.commit("loadingComponent",!1)}))):this.$noty.error("修改失败，密码格式不正确")}}},c=(n(1803),n(3)),component=Object(c.a)(l,(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"reset_password"},[n("nya-container",{attrs:{title:"重置密码"}},[n("nya-input",{staticClass:"mb-15",attrs:{fullwidth:"",autofocus:"",label:"密码",placeholder:"支持6-16位（- _ 大小写字母 数字）",autocomplete:"off"},model:{value:t.password,callback:function(o){t.password="string"==typeof o?o.trim():o},expression:"password"}}),t._v(" "),n("nya-input",{staticClass:"mb-15",attrs:{fullwidth:"",label:"确认密码",placeholder:"与密码相同",autocomplete:"off"},model:{value:t.confirm_password,callback:function(o){t.confirm_password="string"==typeof o?o.trim():o},expression:"confirm_password"}}),t._v(" "),n("button",{staticClass:"nya-btn",attrs:{type:"button",disabled:t.loading},on:{click:t.resetPassword}},[t._v("\n            "+t._s(t.loading?"设置中":"重设密码")+"\n        ")])],1)],1)}),[],!1,null,null,null);o.default=component.exports},621:function(t,o,n){var content=n(1804);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(6).default)("04689fd9",content,!0,{sourceMap:!1})}}]);