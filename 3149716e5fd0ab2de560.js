/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1528:function(t,o,r){"use strict";var e=r(541);r.n(e).a},1529:function(t,o,r){(t.exports=r(5)(!1)).push([t.i,".color .img-colors,.color .nya-input,.color .preview,.color .vc-slider,.color .vue-slider{margin-bottom:.9375rem}.color .vc-slider{width:100%}.color .img-colors .img-color div:not(.nya-subtitle){padding:.625rem;display:inline-block;color:#fff;text-shadow:.125rem .125rem .125rem rgba(0,0,0,.2)}.color .img-colors .img-palette{margin-top:.9375rem}.color .img-colors .img-palette ul{padding:0;margin:0}.color .img-colors .img-palette li{margin:0;display:inline-block;font-size:1rem;box-sizing:border-box;padding:.625rem;text-align:center;color:#fff;text-shadow:.125rem .125rem .125rem rgba(0,0,0,.2)}@media (max-width:850px){.color .img-colors .img-palette li{width:30%}}.color .preview{font-size:0}.color .preview img{width:18.75rem;max-width:100%}",""])},1827:function(t,o,r){"use strict";r.r(o);r(42);var e=r(8),n=(r(62),r(63),r(22),r(496)),l=r(1524),c=r.n(l),h=(r(703),function(image){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=image.width,this.height=this.canvas.height=image.height,this.context.drawImage(image,0,0,this.width,this.height)});h.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},h.prototype.update=function(t){this.context.putImageData(t,0,0)},h.prototype.getPixelCount=function(){return this.width*this.height},h.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},h.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var f=function(){};if(f.prototype.getColor=function(t,o){return this.getPalette(t,5,o)[0]},f.prototype.getPalette=function(t,o,r){(void 0===o||o<2||o>256)&&(o=10),(void 0===r||r<1)&&(r=10);for(var e,n,g,b,image=new h(t),l=image.getImageData().data,c=image.getPixelCount(),f=[],i=0;i<c;i+=r)n=l[(e=4*i)+0],g=l[e+1],b=l[e+2],l[e+3]>=125&&(n>250&&g>250&&b>250||f.push([n,g,b]));var v=m.quantize(f,o),d=v?v.palette():null;return image.removeCanvas(),d},f.prototype.getColorFromUrl=function(t,o,r){var e=document.createElement("img"),n=this;e.addEventListener("load",(function(){var l=n.getPalette(e,5,r)[0];o(l,t)})),e.src=t},f.prototype.getImageData=function(t,o){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var r=new Array(i),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);var data=r.join(""),e=window.btoa(data);o("data:image/png;base64,"+e)}},r.send()},f.prototype.getColorAsync=function(t,o,r){var e=this;this.getImageData(t,(function(t){var n=document.createElement("img");n.addEventListener("load",(function(){var t=e.getPalette(n,5,r)[0];o(t,this)})),n.src=t}))},!v)var v={map:function(t,o){var r={};return o?t.map((function(t,i){return r.index=i,o.call(r,t)})):t.slice()},naturalOrder:function(a,b){return a<b?-1:a>b?1:0},sum:function(t,o){var r={};return t.reduce(o?function(p,t,i){return r.index=i,p+o.call(r,t)}:function(p,t){return p+t},0)},max:function(t,o){return Math.max.apply(null,o?v.map(t,o):t)}};var d,m=function(){var t=5,o=8-t,r=1e3,e=.75;function n(o,g,b){return(o<<2*t)+(g<<t)+b}function l(t){var o=[],r=!1;function e(){o.sort(t),r=!0}return{push:function(t){o.push(t),r=!1},peek:function(t){return r||e(),void 0===t&&(t=o.length-1),o[t]},pop:function(){return r||e(),o.pop()},size:function(){return o.length},map:function(t){return o.map(t)},debug:function(){return r||e(),o}}}function c(t,o,r,e,n,l,c){this.r1=t,this.r2=o,this.g1=r,this.g2=e,this.b1=n,this.b2=l,this.histo=c}function h(){this.vboxes=new l((function(a,b){return v.naturalOrder(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())}))}function f(t,o){if(o.count()){var r=o.r2-o.r1+1,e=o.g2-o.g1+1,l=o.b2-o.b1+1,c=v.max([r,e,l]);if(1==o.count())return[o.copy()];var i,h,f,d,m=0,w=[],x=[];if(c==r)for(i=o.r1;i<=o.r2;i++){for(d=0,h=o.g1;h<=o.g2;h++)for(f=o.b1;f<=o.b2;f++)d+=t[n(i,h,f)]||0;m+=d,w[i]=m}else if(c==e)for(i=o.g1;i<=o.g2;i++){for(d=0,h=o.r1;h<=o.r2;h++)for(f=o.b1;f<=o.b2;f++)d+=t[n(h,i,f)]||0;m+=d,w[i]=m}else for(i=o.b1;i<=o.b2;i++){for(d=0,h=o.r1;h<=o.r2;h++)for(f=o.g1;f<=o.g2;f++)d+=t[n(h,f,i)]||0;m+=d,w[i]=m}return w.forEach((function(t,i){x[i]=m-t})),y(c==r?"r":c==e?"g":"b")}function y(t){var r,e,n,l,c,h=t+"1",f=t+"2",v=0;for(i=o[h];i<=o[f];i++)if(w[i]>m/2){for(n=o.copy(),l=o.copy(),c=(r=i-o[h])<=(e=o[f]-i)?Math.min(o[f]-1,~~(i+e/2)):Math.max(o[h],~~(i-1-r/2));!w[c];)c++;for(v=x[c];!v&&w[c-1];)v=x[--c];return n[f]=c,l[h]=n[f]+1,[n,l]}}}return c.prototype={volume:function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var o=this.histo;if(!this._count_set||t){var i,r,e,l=0;for(i=this.r1;i<=this.r2;i++)for(r=this.g1;r<=this.g2;r++)for(e=this.b1;e<=this.b2;e++)l+=o[n(i,r,e)]||0;this._count=l,this._count_set=!0}return this._count},copy:function(){return new c(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(o){var r=this.histo;if(!this._avg||o){var e,i,l,c,h=0,f=1<<8-t,v=0,d=0,m=0;for(i=this.r1;i<=this.r2;i++)for(l=this.g1;l<=this.g2;l++)for(c=this.b1;c<=this.b2;c++)h+=e=r[n(i,l,c)]||0,v+=e*(i+.5)*f,d+=e*(l+.5)*f,m+=e*(c+.5)*f;this._avg=h?[~~(v/h),~~(d/h),~~(m/h)]:[~~(f*(this.r1+this.r2+1)/2),~~(f*(this.g1+this.g2+1)/2),~~(f*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(t){var r=t[0]>>o,e=t[1]>>o,n=t[2]>>o;return r>=this.r1&&r<=this.r2&&e>=this.g1&&e<=this.g2&&n>=this.b1&&n<=this.b2}},h.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var o=this.vboxes,i=0;i<o.size();i++)if(o.peek(i).vbox.contains(t))return o.peek(i).color;return this.nearest(t)},nearest:function(t){for(var o,r,e,n=this.vboxes,i=0;i<n.size();i++)((r=Math.sqrt(Math.pow(t[0]-n.peek(i).color[0],2)+Math.pow(t[1]-n.peek(i).color[1],2)+Math.pow(t[2]-n.peek(i).color[2],2)))<o||void 0===o)&&(o=r,e=n.peek(i).color);return e},forcebw:function(){var t=this.vboxes;t.sort((function(a,b){return v.naturalOrder(v.sum(a.color),v.sum(b.color))}));var o=t[0].color;o[0]<5&&o[1]<5&&o[2]<5&&(t[0].color=[0,0,0]);var r=t.length-1,e=t[r].color;e[0]>251&&e[1]>251&&e[2]>251&&(t[r].color=[255,255,255])}},{quantize:function(d,m){if(!d.length||m<2||m>256)return!1;var w=function(r){var e,l,c,h,f=new Array(1<<3*t);return r.forEach((function(t){l=t[0]>>o,c=t[1]>>o,h=t[2]>>o,e=n(l,c,h),f[e]=(f[e]||0)+1})),f}(d);w.forEach((function(){0}));var x=function(t,r){var e,n,l,h=1e6,f=0,v=1e6,d=0,m=1e6,w=0;return t.forEach((function(t){e=t[0]>>o,n=t[1]>>o,l=t[2]>>o,e<h?h=e:e>f&&(f=e),n<v?v=n:n>d&&(d=n),l<m?m=l:l>w&&(w=l)})),new c(h,f,v,d,m,w,r)}(d,w),y=new l((function(a,b){return v.naturalOrder(a.count(),b.count())}));function C(t,o){for(var e,n=1,l=0;l<r;)if((e=t.pop()).count()){var c=f(w,e),h=c[0],v=c[1];if(!h)return;if(t.push(h),v&&(t.push(v),n++),n>=o)return;if(l++>r)return}else t.push(e),l++}y.push(x),C(y,e*m);for(var _=new l((function(a,b){return v.naturalOrder(a.count()*a.volume(),b.count()*b.volume())}));y.size();)_.push(y.pop());C(_,m-_.size());for(var k=new h;_.size();)k.push(_.pop());return k}}}(),w=f;r(476);d=r(477);var x={name:"Color",head:function(){return this.$store.state.currentTool.head},components:{"slider-picker":n.Slider,VueSlider:d},data:function(){return{colorVal:"",n:null,file:null,colors:"#00ADB5",alpha:1,preview:"",results:"",imgColor:{color:"",palette:""},loading:!1,colorthief:new w}},computed:{handleColor:function(){var t=c()(this.colors);return{"RGB(A)":t.toString("rgb").toUpperCase(),HEX6:t.toHexString().toUpperCase(),HEX8:t.toHex8String().toUpperCase(),"HSL(A)":t.toString("hsl").toUpperCase(),"HSV(A)":t.toString("hsv").toUpperCase()}}},watch:{colors:function(t){var o=c()(t);this.alpha=o.getAlpha()}},methods:{updateAlpha:function(){var t=c()(this.colors);t.setAlpha(this.alpha),this.colors=t.toHex8String()},updateColor:function(t){var o=c()(t.hex);o.setAlpha(this.alpha),this.colors=o.toHex8String()},handleChange:function(t){var o=this;if(this.loading)return!1;var r=t.target.files;if(!r.length)return!1;var n=r[0];this.loading=!0;var l=new FileReader;l.readAsDataURL(n),l.addEventListener("load",Object(e.a)(regeneratorRuntime.mark((function t(){var img;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.preview=l.result,(img=new Image).onload=function(){var t=o.colorthief.getPalette(img).map((function(t){return c()("rgb(".concat(t.toString(),")")).toHexString()})),r=c()("rgb(".concat(o.colorthief.getColor(img).toString(),")")).toHexString();o.imgColor.palette=t,o.imgColor.color=r,o.colors=r,o.loading=!1},img.src=o.preview;case 4:case"end":return t.stop()}}),t)}))),!1)},handleColorVal:function(t){var o=c()(t);o.isValid()&&(this.colors=o.toHex8String())}}},y=(r(1528),r(3)),component=Object(y.a)(x,(function(){var t=this,o=t.$createElement,r=t._self._c||o;return r("div",{staticClass:"color"},[r("nya-container",{attrs:{title:"颜色转换"}},[r("nya-input",{attrs:{label:"输入颜色代码",placeholder:"#ffffff",autocomplete:"off",autofocus:"",fullwidth:""},on:{input:t.handleColorVal},model:{value:t.colorVal,callback:function(o){t.colorVal=o},expression:"colorVal"}}),t._v(" "),r("client-only",[r("slider-picker",{attrs:{value:t.colors},on:{input:t.updateColor}})],1),t._v(" "),r("client-only",[r("vue-slider",{attrs:{interval:.1,lazy:"",min:0,max:1},on:{change:t.updateAlpha},model:{value:t.alpha,callback:function(o){t.alpha=o},expression:"alpha"}})],1),t._v(" "),r("nya-input",{attrs:{type:"file",accept:"image/*",label:"请选择要提取主色的图片",placeholder:"点击这里上传文件",fullwidth:""},on:{change:t.handleChange},model:{value:t.n,callback:function(o){t.n=o},expression:"n"}}),t._v(" "),t.preview?r("div",{staticClass:"preview"},[r("div",{staticClass:"nya-subtitle"},[t._v("\n                预览\n            ")]),t._v(" "),r("img",{attrs:{src:t.preview,alt:"preview"}})]):t._e(),t._v(" "),t.preview?r("div",{staticClass:"img-colors"},[r("div",{staticClass:"img-color"},[r("div",{staticClass:"nya-subtitle"},[t._v("\n                    主色\n                ")]),t._v(" "),r("div",{style:{"background-color":t.imgColor.color}},[t._v("\n                    "+t._s(t.imgColor.color)+"\n                ")])]),t._v(" "),r("div",{staticClass:"img-palette"},[r("div",{staticClass:"nya-subtitle"},[t._v("\n                    调色盘\n                ")]),t._v(" "),r("ul",t._l(t.imgColor.palette,(function(o,e){return r("li",{key:e,style:{"background-color":o}},[t._v("\n                        "+t._s(o)+"\n                    ")])})),0)])]):t._e()],1),t._v(" "),t.colors?r("nya-container",{attrs:{title:"结果"}},[r("div",{staticClass:"text",style:{color:t.colors}},[t._v("\n            文字效果\n        ")]),t._v(" "),t._l(t.handleColor,(function(o,e){return r("p",{key:e},[r("b",[t._v(t._s(e)+"：")]),r("span",[t._v(t._s(o))])])}))],2):t._e()],1)}),[],!1,null,null,null);o.default=component.exports},541:function(t,o,r){var content=r(1529);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(6).default)("6511c69d",content,!0,{sourceMap:!1})}}]);