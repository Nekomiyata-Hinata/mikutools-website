(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1892:function(t,n,e){"use strict";e.r(n);var o=e(52),c=e.n(o),l=e(497),r={name:"Addmin",head:function(){return{title:this.title}},data:function(){return{title:"管理 - ".concat("MikuTools"),noticeContent:"",noticeTitle:"",loading:!1,cardRequestIn:!1,notification:""}},computed:{result:function(){return Object(l.a)(this.noticeContent)}},mounted:function(){this.getNotice()},methods:{formatDate:function(t){return c.a.unix(t).format("YYYY年MM月DD日 HH:mm:ss")},getNotice:function(){var t=this;this.$axios.get("/notification").then((function(n){n.data.data.id&&(t.noticeContent=n.data.data.content,t.noticeTitle=n.data.data.title)})).catch((function(n){t.$swal({type:"error",title:"获取通知失败",text:"可能是服务器正在维护中：".concat(n)})}))},submit:function(){var t=this;this.loading||(this.loading=!0,this.$axios.post("/notification",{noticeContent:this.result,noticeTitle:this.noticeTitle}).then((function(){t.$swal({type:"success",title:"发送成功"}),t.loading=!1})).catch((function(n){t.$swal({type:"error",title:"提交失败",text:"ERROR: ".concat(n)}),t.loading=!1})))}}},d=e(3),component=Object(d.a)(r,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"addmin"},[e("nya-container",{attrs:{title:"发送通知"}},[e("nya-input",{staticClass:"mb-15",attrs:{fullwidth:"",name:"email",autofocus:"",label:"通知标题",placeholder:"输入通知标题",autocomplete:"off"},model:{value:t.noticeTitle,callback:function(n){t.noticeTitle="string"==typeof n?n.trim():n},expression:"noticeTitle"}}),t._v(" "),e("nya-input",{staticClass:"mb-15",attrs:{fullwidth:"",rows:"5",type:"textarea",label:"通知内容",placeholder:"请输入通知内容"},model:{value:t.noticeContent,callback:function(n){t.noticeContent="string"==typeof n?n.trim():n},expression:"noticeContent"}}),t._v(" "),e("button",{staticClass:"nya-btn",attrs:{type:"button",disabled:t.loading},on:{click:t.submit}},[t._v("\n            "+t._s(t.loading?"提交中":"发送全站通知")+"\n        ")])],1),t._v(" "),e("nya-container",{directives:[{name:"show",rawName:"v-show",value:t.result,expression:"result"}],attrs:{title:"预览通知"}},[e("div",{staticClass:"typo",domProps:{innerHTML:t._s(t.result)}})])],1)}),[],!1,null,null,null);n.default=component.exports},497:function(t,n,e){"use strict";var o=e(523),c=e.n(o),l=e(484),r=e.n(l);e(478);n.a=function(content){return c()(content,{breaks:!0,highlight:function(code){return r.a.highlightAuto(code).value}})}}}]);