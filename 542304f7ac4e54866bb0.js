(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1514:function(t,e,n){"use strict";var r=n(537);n.n(r).a},1515:function(t,e,n){(t.exports=n(5)(!1)).push([t.i,".bt_search .magnet{text-overflow:ellipsis;overflow:hidden}",""])},1911:function(t,e,n){"use strict";n.r(e);n(43);var r={name:"BtSearch",head:function(){return this.$store.state.currentTool.head},data:function(){return{keyword:"",api:"種子搜",data:[],loading:!1,apiList:[],sort:"",pagination:{total:0,current:1}}},computed:{currentApi:function(){var t=this;return this.apiList.filter((function(e){return e.name===t.api}))[0]}},watch:{api:function(){this.sort=this.currentApi.paths[0]}},mounted:function(){this.getApi()},methods:{search:function(t){var e=this;if(this.loading)return!1;this.keyword?(this.loading=!0,this.data=[],this.$axios.post("/bt_search",{source:this.api,page:"number"==typeof t?t:1,keyword:this.keyword,sort:this.sort}).then((function(t){t.data.data.length&&(e.pagination.total=e.pagination.current+1),e.loading=!1,e.data=t.data.data})).catch((function(t){e.loading=!1,e.$swal({type:"error",title:"获取失败",text:t})}))):this.$swal({type:"error",title:"获取失败",text:"请输入正确的关键词"})},doCopy:function(text){var t=this;this.$copyText(text).then((function(){t.$noty.success("复制成功")}),(function(){t.$noty.error("复制失败，请手动选择复制")}))},getApi:function(){var t=this;this.$axios.get("/bt_search").then((function(e){t.apiList=e.data.data,t.sort=t.currentApi.paths[0]})).catch((function(e){t.$swal({type:"error",title:"获取接口失败",text:e})}))}}},o=(n(1514),n(3)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bt_search"},[n("nya-container",{attrs:{title:"磁力搜索"}},[n("div",{staticClass:"inputbtn mb-15"},[n("nya-input",{attrs:{label:"输入关键字开始搜索",placeholder:"lovelive",autocomplete:"off",autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.keyword,callback:function(e){t.keyword="string"==typeof e?e.trim():e},expression:"keyword"}}),t._v(" "),n("button",{staticClass:"nya-btn",attrs:{type:"button",disabled:t.loading},on:{click:t.search}},[t._v("\n                "+t._s(t.loading?"获取中":"开始获取")+"\n            ")])],1),t._v(" "),n("nya-select",{staticClass:"mb-15",attrs:{fullwidth:"",label:"选择接口"},model:{value:t.api,callback:function(e){t.api=e},expression:"api"}},t._l(t.apiList,(function(e){return n("option",{key:e.name,domProps:{value:e.name}},[t._v("\n                "+t._s(e.name)+"\n            ")])})),0),t._v(" "),t.apiList.length&&t.currentApi.paths.length>1?n("nya-select",{staticClass:"mb-15",attrs:{fullwidth:"",label:"选择排序方式"},model:{value:t.sort,callback:function(e){t.sort=e},expression:"sort"}},t._l(t.currentApi.paths,(function(e,r){return n("option",{key:r,domProps:{value:e}},["preset"===e?n("span",[t._v("默認")]):t._e(),t._v(" "),"time"===e?n("span",[t._v("時間")]):t._e(),t._v(" "),"size"===e?n("span",[t._v("大小")]):t._e(),t._v(" "),"hot"===e?n("span",[t._v("人氣")]):t._e()])})),0):t._e()],1),t._v(" "),t.data.length?n("nya-container",{attrs:{title:"获取磁力成功"}},[t.data.length?n("table",{staticClass:"nya-table",staticStyle:{width:"100%"}},[n("thead",[n("tr",[t.currentApi.col.name?n("th",[t._v("\n                        名称\n                    ")]):t._e(),t._v(" "),t.currentApi.col.date?n("th",[t._v("\n                        日期\n                    ")]):t._e(),t._v(" "),t.currentApi.col.size?n("th",[t._v("\n                        文件大小\n                    ")]):t._e(),t._v(" "),t.currentApi.col.hot?n("th",[t._v("\n                        人气\n                    ")]):t._e(),t._v(" "),t.currentApi.col.magnet?n("th",[t._v("\n                        链接\n                    ")]):t._e()])]),t._v(" "),n("tbody",t._l(t.data,(function(e,r){return n("tr",{key:r},[t.currentApi.col.name?n("td",{attrs:{width:"80",title:e.name}},[t._v("\n                        "+t._s(e.name)+"\n                    ")]):t._e(),t._v(" "),t.currentApi.col.date?n("td",{attrs:{width:"40"}},[t._v("\n                        "+t._s(e.date)+"\n                    ")]):t._e(),t._v(" "),t.currentApi.col.size?n("td",{attrs:{width:"40"}},[t._v("\n                        "+t._s(e.size)+"\n                    ")]):t._e(),t._v(" "),t.currentApi.col.hot?n("td",{attrs:{width:"150"}},[t._v("\n                        "+t._s(e.hot)+"\n                    ")]):t._e(),t._v(" "),t.currentApi.col.magnet?n("td",{attrs:{width:"50"}},[n("div",{staticClass:"magnet",attrs:{title:e.magnet.trim()},on:{click:function(n){return t.doCopy(e.magnet)}}},[t._v("\n                            点击复制\n                        ")])]):t._e()])})),0)]):n("h2",[t._v("\n            暂无资源\n        ")]),t._v(" "),n("nya-pagination",{directives:[{name:"show",rawName:"v-show",value:!(t.loading||!t.data.length&&1===t.pagination.current),expression:"!loading && !(!data.length && pagination.current === 1)"}],attrs:{total:t.pagination.total,current:t.pagination.current,"range-before":"1","range-after":"1",order:"is-centered","per-page":"1","aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page"},on:{"update:current":function(e){return t.$set(t.pagination,"current",e)},change:t.search}})],1):t._e(),t._v(" "),n("nya-container",{attrs:{title:"说明"}},[n("ul",{staticClass:"nya-list"},[n("li",[t._v("如果发现某个接口无法使用可尝试更换接口")])])])],1)}),[],!1,null,null,null);e.default=component.exports},537:function(t,e,n){var content=n(1515);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(6).default)("cb92ce7e",content,!0,{sourceMap:!1})}}]);